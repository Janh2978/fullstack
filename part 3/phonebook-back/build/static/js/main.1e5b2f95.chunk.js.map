{"version":3,"sources":["components/Persons.js","components/Filter.js","components/PersonForm.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Person","person","handleDelete","name","number","onClick","Persons","persons","showAll","selected","map","key","id","filter","toLowerCase","includes","Filter","handleChangeFilter","onChange","value","PersonForm","handleSubmit","handleChange","newName","handleChangeNumber","newNumber","onSubmit","type","Notification","message","className","text","baseUrl","axios","get","then","res","data","newObject","post","delete","put","App","useState","setPersons","setNewName","setNewNumber","setShowAll","setSelected","setMessage","useEffect","personsService","returnedPersons","e","target","length","preventDefault","filteredPersons","registeredPerson","window","confirm","returnedPerson","setTimeout","newPerson","concat","catch","error","response","personObject","err","newPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1e5b2f95.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Person = ({person, handleDelete}) => (\r\n  <div>\r\n    {person.name} {person.number}\r\n    <button onClick={() => handleDelete(person)}>delete</button>\r\n  </div>\r\n)\r\n\r\nconst Persons = ({ persons, showAll, selected, handleDelete }) => \r\n  showAll\r\n  ? persons.map((person) => (\r\n    <Person key={person.id} person={person} handleDelete={handleDelete}/>\r\n  ))\r\n  : persons.filter((person) => \r\n    person.name.toLowerCase().includes(selected)\r\n  ).map((person) => (\r\n    <Person key={person.id} person={person} handleDelete={handleDelete}/>\r\n  ))\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst Filter = ({handleChangeFilter, selected}) => (\r\n  <div>\r\n    filter shown with\r\n    <input onChange={handleChangeFilter} value={selected} />\r\n  </div>\r\n)\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = ({ handleSubmit, handleChange, newName, handleChangeNumber, newNumber}) => (\r\n  <form onSubmit={handleSubmit}>\r\n    <div>name: <input onChange={handleChange} value={newName} /></div>\r\n    <div>number: <input onChange={handleChangeNumber} value={newNumber} /></div>\r\n    <div>\r\n      <button type=\"submit\">add</button>\r\n    </div>\r\n  </form>\r\n)\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  if(message.type === 'error'){\r\n    return (\r\n      <div className=\"error\">\r\n        {message.text}\r\n      </div>\r\n    )\r\n  } else {\r\n    return (\r\n      <div className=\"success\">\r\n        {message.text}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Notification","import axios from 'axios'\r\n// const baseUrl = 'http://localhost:3001/persons'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(res => res.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(res => res.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(res => res.data)\r\n}\r\n\r\nconst deletePerson = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request\r\n}\r\n\r\nexport default { getAll, create, deletePerson, update }","import React, { useState, useEffect } from 'react'\r\n\r\nimport Persons from './components/Persons'\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport Notification from './components/Notification'\r\n\r\nimport personsService from './services/persons'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n  const [showAll, setShowAll] = useState(true)\r\n  const [selected, setSelected] = useState('')\r\n  const [message, setMessage] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personsService\r\n    .getAll()\r\n    .then(returnedPersons => {\r\n      setPersons(returnedPersons)\r\n    })\r\n  }, [])\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    const newObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n    const filteredPersons = persons.filter(person => \r\n      person.name.toLowerCase().includes(newName.toLowerCase())\r\n    )\r\n\r\n    if(filteredPersons.length > 0){\r\n      const registeredPerson = filteredPersons[0]\r\n      if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\r\n        const message = { \r\n          text: `Updated ${registeredPerson.name}`, \r\n          type: 'success'\r\n        }\r\n        personsService\r\n        .update(registeredPerson.id, { ...newObject, name: registeredPerson.name })\r\n        .then(returnedPerson=>{\r\n          setPersons(persons.map(person => \r\n            person.id !== returnedPerson.id \r\n            ? person \r\n            : {...person, number: returnedPerson.number})\r\n          )\r\n          setNewName('')\r\n          setNewNumber('')\r\n          setMessage(message)\r\n          setTimeout(() => {\r\n            setMessage(null)\r\n          }, 5000)\r\n        })\r\n      }\r\n    } else {\r\n      personsService\r\n      .create(newObject)\r\n      .then(newPerson => {\r\n        const message = { \r\n          text: `Added ${newPerson.name}`, \r\n          type: 'success' \r\n        }\r\n        setPersons(persons.concat(newPerson))\r\n        setNewName('')\r\n        setNewNumber('')\r\n        setMessage(message)\r\n        setTimeout(() => {\r\n          setMessage(null)\r\n        }, 5000)\r\n      })\r\n      .catch(error => {\r\n        const message = { \r\n          text: `${error.response.data.error}`, \r\n          type: 'error' \r\n        }\r\n        setMessage(message)\r\n        setTimeout(() => {\r\n          setMessage(null)\r\n        }, 5000)\r\n      })\r\n    }      \r\n  }\r\n\r\n  const handleChange = (e) => \r\n    setNewName(e.target.value)\r\n  \r\n  const handleChangeNumber = (e) => \r\n    setNewNumber(e.target.value)\r\n\r\n  const handleChangeFilter = (e) => {\r\n    setSelected(e.target.value)\r\n    e.target.value.length === 0\r\n    ? setShowAll(true) \r\n    : setShowAll(false)\r\n  }\r\n\r\n  const handleDelete = (personObject) => {\r\n    if(window.confirm(`Delete ${personObject.name}`)){\r\n      personsService\r\n      .deletePerson(personObject.id)\r\n      .catch(err => {\r\n        const message = { \r\n          text: `Information of ${personObject.name} has already been removed from server`, \r\n          type: 'error' \r\n        }\r\n        setMessage(message)\r\n        setTimeout(() => {\r\n          setMessage(null)\r\n        }, 5000)\r\n      })\r\n      const newPersons = persons.filter((person) => person.id !== personObject.id)\r\n      setPersons(newPersons)\r\n    }\r\n  }\r\n     \r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message}/>\r\n      <Filter\r\n        handleChangeFilter={handleChangeFilter}\r\n        selected={selected}\r\n      />\r\n\r\n      <h3>Add a new</h3>\r\n      <PersonForm\r\n        handleSubmit={handleSubmit}\r\n        handleChange={handleChange}\r\n        newName={newName}\r\n        handleChangeNumber={handleChangeNumber}\r\n        newNumber={newNumber}\r\n      />\r\n\r\n      <h3>Numbers</h3>\r\n      <Persons\r\n        persons={persons}\r\n        showAll={showAll}\r\n        selected={selected}\r\n        handleDelete={handleDelete}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}